{"version":3,"file":"giftCard_controller.js","names":["Object","defineProperty","exports","value","default","_models","_interopRequireDefault","require","_response","_giftCard_validator","obj","__esModule","_defineProperty","key","_toPropertyKey","enumerable","configurable","writable","t","i","_toPrimitive","r","e","Symbol","toPrimitive","call","TypeError","String","Number","GiftCards","models","GiftCardController","req","res","giftCards","findAll","length","response","Response","status","code","json","error","console","log","id","params","giftCard","findByPk","requestBody","body","GiftCardValidator","updateGiftCardSchema","validate","message","updatedGiftCard","update","where","deletedGiftCard","destroy","_default"],"sources":["../../src/controllers/giftCard_controller.js"],"sourcesContent":["\"use strict\";\n\nimport models from \"../database/models\";\nimport Response from \"../utils/response\";\nimport GiftCardValidator from \"../utils/validators/giftCard_validator\";\n\nconst { GiftCards } = models;\n\n\n/**\n * @class GiftCardController\n **/\nclass GiftCardController {\n\n    /**\n     * @function getGiftCards (Get all gift cards).\n     **/\n    static getGiftCards = async (req, res) => {\n        try {\n            const giftCards = await GiftCards.findAll();\n            if (!giftCards.length) {\n                const response = new Response(\n                    false,\n                    404,\n                    \"No gift card found.\"\n                );\n                return res.status(response.code).json(response);\n            }\n\n            const response = new Response(\n                true,\n                200,\n                'Gift cards retrieved successfully.',\n                { giftCards }\n            );\n            return res.status(response.code).json(response);\n\n        } catch (error) {\n            console.log(`ERROR::: ${error}`);\n\n            const response = new Response(\n                false,\n                500,\n                'Server error, please try again later.'\n            );\n            return res.status(response.code).json(response);\n        }\n    };\n\n\n    /**\n     * @function getGiftCard (Get single gift card).\n     **/\n    static getGiftCard = async (req, res) => {\n        try {\n            const { id } = req.params;\n            const giftCard = await GiftCards.findByPk(id);\n            if (!giftCard) {\n                const response = new Response(\n                    false,\n                    404,\n                    \"Gift card not found.\"\n                );\n                return res.status(response.code).json(response);\n            }\n\n            const response = new Response(\n                true,\n                200,\n                'Gift card retrieved successfully.',\n                { giftCard }\n            );\n            return res.status(response.code).json(response);\n\n        } catch (error) {\n            console.log(`ERROR::: ${error}`);\n\n            const response = new Response(\n                false,\n                500,\n                'Server error, please try again later.'\n            );\n            return res.status(response.code).json(response);\n        }\n    };\n\n    /**\n     * @function updateGiftCard (Update a gift card)\n     **/\n    static updateGiftCard = async (req, res) => {\n        try {\n            const { id } = req.params;\n            const requestBody = req.body;\n\n            //  Validate the Request Body.\n            const { error, value } = GiftCardValidator.updateGiftCardSchema.validate(requestBody);\n            if (error) {\n                const response = new Response(\n                    false,\n                    400,\n                    `${error.message}`\n                );\n                return res.status(response.code).json(response);\n            }\n\n            const updatedGiftCard = await GiftCards.update({ ...value }, { where: { id } });\n            if (updatedGiftCard[0] === 0) {\n                const response = new Response(\n                    false,\n                    400,\n                    \"Failed to update gift card.\"\n                );\n                return res.status(response.code).json(response);\n            }\n\n            //  Get the updated gift card back.\n            const giftCard = await GiftCards.findByPk(id);\n\n            const response = new Response(\n                true,\n                200,\n                \"Gift card updated successfully.\",\n                { giftCard }\n            );\n            return res.status(response.code).json(response);\n\n        } catch (error) {\n            console.log(`ERROR::: ${error}`);\n\n            const response = new Response(\n                false,\n                500,\n                'Server error, please try again later.'\n            );\n            return res.status(response.code).json(response);\n        }\n    };\n\n\n    /**\n     * @function deleteGiftCard (Delete a gift card).\n     **/\n    static deleteGiftCard = async (req, res) => {\n        try {\n            const { id } = req.params;\n\n            const deletedGiftCard = await GiftCards.destroy({ where: { id } });\n            if (deletedGiftCard === 0) {\n                const response = new Response(\n                    false,\n                    400,\n                    \"Failed to delete gift card.\"\n                );\n                return res.status(response.code).json(response);\n            }\n\n            const response = new Response(\n                true,\n                200,\n                \"Gift card deleted successfully.\"\n            );\n            return res.status(response.code).json(response);\n\n        } catch (error) {\n            console.log(`ERROR::: ${error}`);\n\n            const response = new Response(\n                false,\n                500,\n                'Server error, please try again later.'\n            );\n            return res.status(response.code).json(response);\n        }\n    }\n}\n\nexport default GiftCardController;"],"mappings":"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","ignoreList":[]}