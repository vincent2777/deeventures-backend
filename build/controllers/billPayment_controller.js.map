{"version":3,"file":"billPayment_controller.js","names":["Object","defineProperty","exports","value","default","_models","_interopRequireDefault","require","_response","_send_email","_billPayment_validator","_axios","_datetime","obj","__esModule","_defineProperty","key","_toPropertyKey","enumerable","configurable","writable","t","i","_toPrimitive","r","e","Symbol","toPrimitive","call","TypeError","String","Number","Wallets","Transactions","CableTVs","CableTVPackages","Users","ElectricCompany","models","BillPaymentController","req","res","dataBundleURL","body","dataBundleResponse","axios","get","dataBundles","data","internetServiceProviders","entries","flatMap","name","details","map","detail","NAME","ID","PRODUCT","response","Response","status","code","json","error","console","log","cableTvURL","cableTVResponse","cableTVs","channels","values","flat","electricCompaniesURL","electricCompanies","id","requestPayload","requestBody","clubConnectAPIKey","process","env","CLUBCONNECT_API_KEY","clubConnectUserID","CLUBCONNECT_USER_ID","callBackURL","encodeURIComponent","BillPaymentValidator","buyAirtimeSchema","validate","message","mobileNetwork","mobileNumber","airtimeAmount","user","findOne","where","wallet","user_id","amount","initiatePaymentResponse","post","prevWalletAmount","update","orderType","mobilenetwork","trnxDesc","subject","userEmail","email","getCurrentDateTime","emailResponse","SendEMail","handleSendMail","mailData","transaction","trnx_amount","trnx_type","trnx_desc","trnx_status","trnx_rate","trnx_address","trnx_image","to_receive","currency","create","buyDataBundleSchema","dataPlan","dataBundleAmount","totalAmt","productName","productname","dataCommision","split","buyCableTVSchema","cableTV","packageCode","smartCardNo","confirmedPaymentResponse","orderid","buyElectricitySchema","electricCompanyCode","meterType","meterNumber","JSON","stringify","transactionId","transactionid","checkPaymentStatus","queryPaymentResponse","remark","meterToken","metertoken","ordertype","date","convenienceFee","electricName","setTimeout","electric_company_code","meter_no","query","url","validatedDataResponse","validatedData","_default"],"sources":["../../src/controllers/billPayment_controller.js"],"sourcesContent":["\"use strict\";\n\nimport models from \"../database/models\";\nimport Response from \"../utils/response\";\nimport SendEMail from \"../utils/send_email\";\nimport BillPaymentValidator from \"../utils/validators/billPayment_validator\";\nimport axios from \"axios\";\nimport getCurrentDateTime from \"../utils/datetime\";\n\nconst { Wallets, Transactions, CableTVs, CableTVPackages, Users,ElectricCompany } = models;\n\n/**\n * @class BillPaymentController\n **/\nclass BillPaymentController {\n\n    /**\n     * @function getDataBundles (Get Data Bundles).\n     **/\n    static getDataBundles = async (req, res) => {\n        try {\n            const { dataBundleURL } = req.body;\n            // console.log(\"REQUEST BODY::: \", dataBundleURL);\n\n            const dataBundleResponse = await axios.get(dataBundleURL);\n            const dataBundles = dataBundleResponse.data[\"MOBILE_NETWORK\"];\n\n            const internetServiceProviders = Object.entries(dataBundles).flatMap(([name, details]) => {\n                return details.map(detail => ({\n                    NAME: name,\n                    ID: detail.ID,\n                    PRODUCT: detail.PRODUCT\n                }));\n            });\n\n            const response = new Response(\n                true,\n                200,\n                \"Cable TV retrieved successfully\",\n                { internetServiceProviders }\n            );\n            return res.status(response.code).json(response);\n        } catch (error) {\n            console.log(`ERROR::: ${error}`);\n\n            const response = new Response(\n                false,\n                500,\n                'Server error, please try again later.'\n            );\n            return res.status(response.code).json(response);\n        }\n    }\n\n    /**\n     * @function getCableTV (Get Table TV).\n     **/\n    static getCableTV = async (req, res) => {\n        try {\n            const { cableTvURL } = req.body;\n            // console.log(\"REQUEST BODY::: \", cableTvURL);\n\n            const cableTVResponse = await axios.get(cableTvURL);\n            const cableTVs = cableTVResponse.data[\"TV_ID\"];\n\n            const channels = Object.values(cableTVs).flat();\n\n            const response = new Response(\n                true,\n                200,\n                \"Cable TV retrieved successfully\",\n                { channels }\n            );\n            return res.status(response.code).json(response);\n        } catch (error) {\n            console.log(`ERROR::: ${error}`);\n\n            const response = new Response(\n                false,\n                500,\n                'Server error, please try again later.'\n            );\n            return res.status(response.code).json(response);\n        }\n    }\n\n    /**\n     * @function getElectricCompanies (Get Electric Companies).\n     **/\n    static getElectricCompanies = async (req, res) => {\n        try {\n            const { electricCompaniesURL } = req.body;\n            // console.log(\"REQUEST BODY::: \", electricCompaniesURL);\n\n            // const electricCompaniesResponse = await axios.get(electricCompaniesURL);\n            // const electricCompaniesData = electricCompaniesResponse.data[\"ELECTRIC_COMPANY\"];\n\n            // const companiesData = Object.values(electricCompaniesData).flat();\n            let electricCompanies = [];\n\n            // const eCompanies = await ElectricCompany.findAll();\n\n            // Extract Electric companies\n            // Object.keys(companiesData).forEach(electricCompanyKey => {\n                // electricCompanies.push({\n                //     \"code\": companiesData[electricCompanyKey][\"ID\"],\n                //     \"name\": companiesData[electricCompanyKey][\"NAME\"]\n                // });\n            // });\n\n            const response = new Response(\n                true,\n                200,\n                \"Electic Companies retrieved successfully\",\n                { electricCompanies }\n            );\n            return res.status(response.code).json(response);\n        } catch (error) {\n            console.log(`ERROR::: ${error}`);\n\n            const response = new Response(\n                false,\n                500,\n                'Server error, please try again later.'\n            );\n            return res.status(response.code).json(response);\n        }\n    }\n\n\n    /**\n     * @function buyAirtime (Buy airtime).\n     **/\n    static buyAirtime = async (req, res) => {\n        try {\n            const { id } = req.requestPayload;\n            const requestBody = req.body;\n            const clubConnectAPIKey = process.env.CLUBCONNECT_API_KEY;\n            const clubConnectUserID = process.env.CLUBCONNECT_USER_ID;\n            const callBackURL = encodeURIComponent(\"http://localhost:5000/api/v1/bill_payment/buy_airtime\");\n            // console.log(\"REQUEST PAYLOAD::: \", requestBody);\n\n            //  Validate the Request Body.\n            const { error, value } = BillPaymentValidator.buyAirtimeSchema.validate({ ...requestBody });\n            if (error) {\n                const response = new Response(\n                    false,\n                    400,\n                    `${error.message}`\n                );\n                return res.status(response.code).json(response);\n            }\n            const { mobileNetwork, mobileNumber, airtimeAmount } = value;\n\n            //get userEmail\n            const user = await Users.findOne({\n                where: { id: id },\n            });\n\n            // Check user's wallet balance.\n            const wallet = await Wallets.findOne({\n                where: { user_id: id },\n            });\n            if (!wallet) {\n                const response = new Response(\n                    false,\n                    404,\n                    \"Wallet not found.\"\n                );\n                return res.status(response.code).json(response);\n            }\n            if (wallet.amount < airtimeAmount) {\n                const response = new Response(\n                    false,\n                    300,\n                    \"Insufficient wallet balance. Kindly top-up your wallet by selling crypto or gift card.\"\n                );\n                return res.status(response.code).json(response);\n            }\n\n            // Initiate and make payment for airtime.\n            const initiatePaymentResponse = await axios.post(`https://www.nellobytesystems.com/APIAirtimeV1.asp?UserID=${clubConnectUserID}&APIKey=${clubConnectAPIKey}&MobileNetwork=${mobileNetwork}&Amount=${airtimeAmount}&MobileNumber=${mobileNumber}`);\n            if (initiatePaymentResponse.data.status !== \"ORDER_RECEIVED\") {\n                const response = new Response(\n                    false,\n                    409,\n                    \"Failed to make payment. Please try again later.\"\n                );\n                return res.status(response.code).json(response);\n            }\n\n            // Confirm payment\n            /*const confirmedPaymentResponse = await axios.post(`https://www.nellobytesystems.com/APIQueryV1.asp?UserID=${clubConnectUserID}&APIKey=${clubConnectAPIKey}&OrderID=${initiatePaymentResponse.data.orderid}`);\n            if (confirmedPaymentResponse.data.status !== \"ORDER_RECEIVED\" || confirmedPaymentResponse.data.status !== \"ORDER_COMPLETED\") {\n                const response = new Response(\n                    false,\n                    409,\n                    \"Failed to make payment. Please try again later.\"\n                );\n                return res.status(response.code).json(response);\n            }*/\n\n            // Deduct airtime amount from user's wallet\n            const prevWalletAmount = wallet.amount;\n            await Wallets.update({ amount: prevWalletAmount - airtimeAmount }, {\n                where: { user_id: id },\n            });\n\n            const orderType = initiatePaymentResponse.data.mobilenetwork;\n            const trnxDesc = `Buy ${orderType} airtime`;\n\n            //send email\n            const subject = \"Airtime Purchase Successful\";\n            const userEmail = user.email;\n            const message = `\n            <h2>Your mobile number has been topped up</h2>\n            <p><b>Amount:</b> ₦${airtimeAmount}</p>\n            <p><b>Mobile Number:</b> ${mobileNumber}</p> \n            <p><b>Description:</b> ${trnxDesc}</p> \n            <p><b>Date:</b> ${getCurrentDateTime()}</p>`;\n\n            const emailResponse = SendEMail.handleSendMail(userEmail, message, subject)\n            const mailData = await emailResponse;\n            // console.log(\"EMAIL RESPONSE::: \", mailData);\n\n            // Insert transaction information into Transactions table\n            const transaction = {\n                user_id: id,\n                trnx_amount: airtimeAmount,\n                trnx_type: \"Bill Payment\",\n                trnx_desc: trnxDesc,\n                trnx_status: 1,\n                trnx_rate: airtimeAmount,\n                trnx_address: mobileNumber,\n                trnx_image: \"\",\n                to_receive: airtimeAmount,\n                currency: \"NGN\",\n            };\n            await Transactions.create({ ...transaction });\n\n            const response = new Response(\n                true,\n                200,\n                `You have successfully topped up ${airtimeAmount} credit unit to ${mobileNumber}.`,\n                { transaction }\n            );\n            return res.status(response.code).json(response);\n        } catch (error) {\n            console.log(`ERROR::: ${error}`);\n\n            const response = new Response(\n                false,\n                500,\n                'Server error, please try again later.'\n            );\n            return res.status(response.code).json(response);\n        }\n    };\n\n\n    /**\n     * @function buyDataBundle (Buy data bundle).\n     **/\n    static buyDataBundle = async (req, res) => {\n        try {\n            const { id } = req.requestPayload;\n            const requestBody = req.body;\n            const clubConnectAPIKey = process.env.CLUBCONNECT_API_KEY;\n            const clubConnectUserID = process.env.CLUBCONNECT_USER_ID;\n            const callBackURL = encodeURIComponent(\"http://localhost:5000/api/v1/bill_payment/buy_data_bundle\");\n\n            //  Validate the Request Body.\n            const { error, value } = BillPaymentValidator.buyDataBundleSchema.validate(requestBody);\n            if (error) {\n                const response = new Response(\n                    false,\n                    400,\n                    `${error.message}`\n                );\n                return res.status(response.code).json(response);\n            }\n            const { mobileNetwork, dataPlan, mobileNumber, dataBundleAmount, totalAmt } = value;\n\n            //get userEmail\n            const user = await Users.findOne({\n                where: { id: id },\n            });\n            // Check user's wallet balance.\n            const wallet = await Wallets.findOne({\n                where: { user_id: id },\n            });\n            if (!wallet) {\n                const response = new Response(\n                    false,\n                    404,\n                    \"Wallet not found.\"\n                );\n                return res.status(response.code).json(response);\n            }\n            if (wallet.amount < dataBundleAmount) {\n                const response = new Response(\n                    false,\n                    300,\n                    \"Insufficient wallet balance. Kindly top-up your wallet by selling crypto or gift card.\"\n                );\n                return res.status(response.code).json(response);\n            }\n\n            // Initiate and make payment for data.\n            const initiatePaymentResponse = await axios.post(`https://www.nellobytesystems.com/APIDatabundleV1.asp?UserID=${clubConnectUserID}&APIKey=${clubConnectAPIKey}&MobileNetwork=${mobileNetwork}&DataPlan=${dataPlan}&MobileNumber=${mobileNumber}`);\n            if (initiatePaymentResponse.data.status !== \"ORDER_RECEIVED\") {\n                const response = new Response(\n                    false,\n                    409,\n                    \"Failed to make payment. Please try again later.\"\n                );\n                return res.status(response.code).json(response);\n            }\n\n            // Confirm payment\n            /*const confirmedPaymentResponse = await axios.post(`https://www.nellobytesystems.com/APIQueryV1.asp?UserID=${clubConnectUserID}&APIKey=${clubConnectAPIKey}&OrderID=${initiatePaymentResponse.data.orderid}`);\n            if (confirmedPaymentResponse.data.status !== \"ORDER_COMPLETED\") {\n                const response = new Response(\n                    false,\n                    409,\n                    \"Failed to make payment. Please try again later.\"\n                );\n                return res.status(response.code).json(response);\n            }*/\n\n            // Deduct airtime amount from user's wallet\n            const prevWalletAmount = wallet.amount;\n            await Wallets.update({ amount: prevWalletAmount - dataBundleAmount }, {\n                where: { user_id: id },\n            });\n\n            const productName = initiatePaymentResponse.data.productname;\n            const orderType = initiatePaymentResponse.data.mobilenetwork;\n            const dataCommision = totalAmt - dataBundleAmount;\n            const trnxDesc = `Purchased ${orderType} - ${productName} Data @ ${dataCommision}% commission`;\n\n            //send email\n            const subject = \"Data Purchase Successful\";\n            const userEmail = user.email;\n            const message = `\n            <h2>Your mobile number has been topped up</h2>\n            <p><b>Amount:</b> ₦${totalAmt}</p>\n            <p><b>Mobile Number:</b> ${mobileNumber}</p> \n            <p><b>Description:</b> ${trnxDesc}</p> \n            <p><b>Date:</b> ${getCurrentDateTime()}</p>`;\n\n            const emailResponse = SendEMail.handleSendMail(userEmail, message, subject)\n            const mailData = await emailResponse;\n\n            // Insert transaction information into Transactions table\n            const transaction = {\n                user_id: id,\n                trnx_amount: totalAmt,\n                trnx_type: \"Bill Payment\",\n                trnx_desc: trnxDesc,\n                trnx_status: 1,\n                trnx_rate: totalAmt,\n                trnx_address: mobileNumber,\n                trnx_image: \"\",\n                to_receive: initiatePaymentResponse.data.productname.split(\" \")[0],\n                currency: \"NGN\",\n            };\n            await Transactions.create({ ...transaction });\n\n            const response = new Response(\n                true,\n                200,\n                `Your mobile number have successfully been topped with ${initiatePaymentResponse.data.productname} data unit.`,\n                { transaction }\n            );\n            return res.status(response.code).json(response);\n        } catch (error) {\n            console.log(`ERROR::: ${error}`);\n\n            const response = new Response(\n                false,\n                500,\n                'Server error, please try again later.'\n            );\n            return res.status(response.code).json(response);\n        }\n    };\n\n\n    /**\n     * @function buyCableTV (Buy cable-tv subscription).\n     **/\n    static buyCableTV = async (req, res) => {\n        try {\n            const { id } = req.requestPayload;\n            const requestBody = req.body;\n            const clubConnectAPIKey = process.env.CLUBCONNECT_API_KEY;\n            const clubConnectUserID = process.env.CLUBCONNECT_USER_ID;\n            const callBackURL = encodeURIComponent(\"http://localhost:5000/api/v1/bill_payment/buy_cable_tv\");\n            // console.log(\"CABLE TV::: \", cableTV, packageCode);\n\n            //  Validate the Request Body.\n            const { error, value } = BillPaymentValidator.buyCableTVSchema.validate(requestBody);\n            if (error) {\n                const response = new Response(\n                    false,\n                    400,\n                    `${error.message}`\n                );\n                return res.status(response.code).json(response);\n            }\n            const { cableTV, packageCode, smartCardNo, mobileNumber, amount } = value;\n\n            // Check user's wallet balance.\n            const wallet = await Wallets.findOne({\n                where: { user_id: id },\n            });\n            if (!wallet) {\n                const response = new Response(\n                    false,\n                    404,\n                    \"Wallet not found.\"\n                );\n                return res.status(response.code).json(response);\n            }\n            if (wallet.amount < amount) {\n                const response = new Response(\n                    false,\n                    300,\n                    \"Insufficient wallet balance. Kindly top-up your wallet by selling crypto or gift card.\"\n                );\n                return res.status(response.code).json(response);\n            }\n\n            // Initiate and make payment for data.\n            const initiatePaymentResponse = await axios.post(`https://www.nellobytesystems.com/APICableTVV1.asp?UserID=${clubConnectUserID}&APIKey=${clubConnectAPIKey}&CableTV=${cableTV}&Package=${packageCode}&SmartCardNo=${smartCardNo}&PhoneNo=${mobileNumber}&CallBackURL=${callBackURL}`);\n            if (initiatePaymentResponse.data.status !== \"ORDER_RECEIVED\") {\n                const response = new Response(\n                    false,\n                    409,\n                    \"Failed to initiate payment.\"\n                );\n                return res.status(response.code).json(response);\n            }\n\n            // Confirm payment\n            const confirmedPaymentResponse = await axios.post(`https://www.nellobytesystems.com/APICableTVV1.asp?UserID=${clubConnectUserID}&APIKey=${clubConnectAPIKey}&OrderID=${initiatePaymentResponse.data.orderid}`);\n            if (confirmedPaymentResponse.data.status !== \"ORDER_COMPLETED\") {\n                const response = new Response(\n                    false,\n                    409,\n                    \"Failed to make payment. Please try again later.\"\n                );\n                return res.status(response.code).json(response);\n            }\n\n            // Deduct cable tv amount from user's wallet\n            const prevWalletAmount = wallet.amount;\n            await Wallets.update({ amount: prevWalletAmount - amount }, {\n                where: { user_id: id },\n            });\n\n            // Insert transaction information into Transactions table\n            const transaction = {\n                user_id: id,\n                trnx_amount: amount,\n                trnx_type: \"Bill Payment\",\n                trnx_desc: `Monthly subscription for ${packageCode} on ${smartCardNo}.`,\n                trnx_status: 1,\n                trnx_rate: amount,\n                trnx_address: smartCardNo,\n                trnx_image: \"\",\n                to_receive: packageCode,\n                currency: \"NGN\",\n            };\n            await Transactions.create({ ...transaction });\n\n            const response = new Response(\n                true,\n                200,\n                `Your subscription for ${packageCode} on ${smartCardNo} was successful.`,\n                { transaction }\n            );\n            return res.status(response.code).json(response);\n        } catch (error) {\n            console.log(`ERROR::: ${error}`);\n\n            const response = new Response(\n                false,\n                500,\n                'Server error, please try again later.'\n            );\n            return res.status(response.code).json(response);\n        }\n    };\n\n\n    /**\n     * @function buyElectricity (Buy electricity subscription).\n     **/\n    static buyElectricity = async (req, res) => {\n        try {\n            const { id } = req.requestPayload;\n            const requestBody = req.body;\n            const clubConnectAPIKey = process.env.CLUBCONNECT_API_KEY;\n            const clubConnectUserID = process.env.CLUBCONNECT_USER_ID;\n            const callBackURL = encodeURIComponent(\"http://localhost:5000/api/v1/bill_payment/buy_cable_tv\");\n\n            //  Validate the Request Body.\n            const { error, value } = BillPaymentValidator.buyElectricitySchema.validate(requestBody);\n            if (error) {\n                const response = new Response(\n                    false,\n                    400,\n                    `${error.message}`\n                );\n                return res.status(response.code).json(response);\n            }\n            const { electricCompanyCode, meterType, meterNumber, amount, totalAmt, mobileNumber } = value;\n\n            // Check user's wallet balance.\n            const wallet = await Wallets.findOne({\n                where: { user_id: id },\n            });\n\n            //get userEmail\n            const user = await Users.findOne({\n                where: { id: id },\n            });\n\n            if (!wallet) {\n                const response = new Response(\n                    false,\n                    404,\n                    \"Wallet not found.\"\n                );\n                return res.status(response.code).json(response);\n            }\n            if (wallet.amount < totalAmt) {\n                const response = new Response(\n                    false,\n                    300,\n                    \"Insufficient wallet balance. Kindly top-up your wallet by selling crypto or gift card.\"\n                );\n                return res.status(response.code).json(response);\n            }\n\n            // Initiate and make payment for data.\n            const initiatePaymentResponse = await axios.post(`https://www.nellobytesystems.com/APIElectricityV1.asp?UserID=${clubConnectUserID}&APIKey=${clubConnectAPIKey}&ElectricCompany=${electricCompanyCode}&MeterType=${meterType}&MeterNo=${meterNumber}&Amount=${amount}&PhoneNo=${mobileNumber}&CallBackURL=${callBackURL}`);\n            console.log('initiatePaymentResponse:::', JSON.stringify(initiatePaymentResponse.data, null, 2));\n\n            const transactionId = initiatePaymentResponse.data.transactionid;\n            console.log('transactionId:::', transactionId);\n\n            if (initiatePaymentResponse.data.status !== \"ORDER_RECEIVED\") {\n                const response = new Response(\n                    false,\n                    409,\n                    \"Failed to initiate payment.\",\n                );\n                return res.status(response.code).json(response);\n            }\n\n            // Function to query payment status recursively until ORDER_COMPLETED\n            const checkPaymentStatus = async () => {\n                try {\n                    const queryPaymentResponse = await axios.get(`https://www.nellobytesystems.com/APIQueryV1.0.asp?UserID=${clubConnectUserID}&APIKey=${clubConnectAPIKey}&OrderID=${transactionId}`);\n                    console.log('queryPaymentResponse:::', JSON.stringify(queryPaymentResponse.data, null, 2));\n\n                    if (queryPaymentResponse.data.status === \"ORDER_COMPLETED\" && queryPaymentResponse.data.remark === \"TRANSACTION SUCCESSFUL\") {\n                        // Deduct airtime amount from user's wallet\n                        const prevWalletAmount = wallet.amount;\n                        await Wallets.update({ amount: prevWalletAmount - totalAmt }, {\n                            where: { user_id: id },\n                        });\n\n                        const meterToken = queryPaymentResponse.data.metertoken;\n                        const ordertype = queryPaymentResponse.data.ordertype;\n                        const date = queryPaymentResponse.data.date;\n                        const convenienceFee = totalAmt - amount;\n                        const trnxDesc = `Buy ${electricName} for Meter No. (${meterNumber}) @ NGN ${convenienceFee} convenience fee. Meter Recharge Token: ${meterToken}`;\n\n                        console.log(\"trnxDesc\", trnxDesc)\n\n                        //send email\n                        const subject = \"Electricity Bill Subscription Successful\";\n                        const userEmail = user.email;\n                        const message = `\n                        <h2>Your Electricity Bill Subscription was successful</h2>\n                        <p><b>Amount:</b> ₦${totalAmt}</p>\n                        <p><b>Mobile Number:</b> ${mobileNumber}</p> \n                        <p><b>Provider:</b> ${ordertype}</p> \n                        <p><b>Meter Number:</b> ${meterNumber}</p> \n                        <p><b>Description:</b> ${trnxDesc}</p> \n                        <p><b>Date:</b> ${date}</p>`;\n\n                        const emailResponse = SendEMail.handleSendMail(userEmail, message, subject)\n                        console.log(\"EMAIL RESPONSE::: \", emailResponse.response);\n\n                        // Insert transaction information into Transactions table\n                        const transaction = {\n                            user_id: id,\n                            trnx_amount: amount,\n                            trnx_type: \"Bill Payment\",\n                            trnx_desc: trnxDesc,\n                            trnx_status: 1,\n                            trnx_rate: totalAmt,\n                            trnx_address: meterNumber,\n                            trnx_image: \"\",\n                            to_receive: amount,\n                            currency: \"NGN\",\n                        };\n                        await Transactions.create({ ...transaction });\n\n                        const response = new Response(\n                            true,\n                            200,\n                            `Your electricity purchase of ${amount} on ${meterNumber} was successful.`,\n                            { transaction }\n                        );\n                        return res.status(response.code).json(response);\n                    } else if (queryPaymentResponse.data.status === \"ORDER_RECEIVED\" || queryPaymentResponse.data.remark === \"Network Unresponsive\" || queryPaymentResponse.data.remark === \"Network Unresponsive\") {\n                        // Check again after a delay (e.g., every 5 seconds)\n                        setTimeout(checkPaymentStatus, 3000); // 5000 milliseconds = 5 seconds\n                    } else {\n                        const response = new Response(\n                            false,\n                            409,\n                            \"Failed to make payment. Please try again later.\"\n                        );\n                        return res.status(response.code).json(response);\n                    }\n                } catch (error) {\n                    console.log(`ERROR querying payment status::: ${error}`);\n\n                    const response = new Response(\n                        false,\n                        500,\n                        'Server error, please try again later.'\n                    );\n                    return res.status(response.code).json(response);\n                }\n            };\n\n            // Start checking payment status\n            await checkPaymentStatus();\n\n        } catch (error) {\n            console.log(`ERROR::: ${error}`);\n\n            const response = new Response(\n                false,\n                500,\n                'Server error, please try again later.'\n            );\n            return res.status(response.code).json(response);\n        }\n    };\n\n    /**\n* @function validateMeterNO (To get a name tied to meter number).\n**/\n    static validateMeterNo = async (req, res) => {\n        try {\n            // Read and parse the raw POST data\n            const { electric_company_code, meter_no } = req.query;\n            const clubConnectAPIKey = process.env.CLUBCONNECT_API_KEY;\n            const clubConnectUserID = process.env.CLUBCONNECT_USER_ID;\n\n            const url = `https://www.nellobytesystems.com/APIVerifyElectricityV1.asp?UserID=${clubConnectUserID}&APIKey=${clubConnectAPIKey}&ElectricCompany=${electric_company_code}&MeterNo=${meter_no}`;\n\n            // Make a request to the external API\n            const validatedDataResponse = await axios.get(url);\n\n            // Extract only the data part of the response\n            const validatedData = validatedDataResponse.data;\n            // console.error(`DATA::: ${electric_company_code}`);\n            // console.error(`DATA::: ${meter_no} `);\n\n            if (validatedData.status === \"INVALID_ElectricCompany\" || validatedData.status === \"INVALID_METERNO\") {\n                const response = new Response(\n                    false,\n                    409,\n                    \"Failed to validate meter no. ERROR: \" + validatedData.status\n                );\n                return res.status(response.code).json(response);\n            }\n            const response = new Response(\n                true,\n                200,\n                \"Meter Number Validated Successfully\",\n                { validatedData }\n            );\n            return res.status(response.code).json(response);\n\n        } catch (error) {\n            console.error(`ERROR::: ${error}`);\n            const response = new Response(\n                false,\n                500,\n                \"Server error, please try again later.\"\n            );\n            return res.status(response.code).json(response);\n        }\n    };\n}\n\nexport default BillPaymentController;"],"mappings":"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","ignoreList":[]}