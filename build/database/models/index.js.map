{"version":3,"file":"index.js","names":["_fs","_interopRequireDefault","require","_path","_sequelize","_dbConfig","obj","__esModule","default","_getRequireWildcardCache","e","WeakMap","r","t","_interopRequireWildcard","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","basename","path","__filename","env","process","APP_NODE_ENV","config","dbConfig","db","sequelize","use_env_variable","Sequelize","database","username","password","fs","readdirSync","__dirname","filter","file","indexOf","slice","forEach","modelPath","join","model","specifier","Promise","then","s","DataTypes","name","keys","modelName","associate","module","exports"],"sources":["../../../src/database/models/index.js"],"sourcesContent":["\"use strict\";\n\n/*const fs = require('fs');\nconst path = require('path');\nconst Sequelize = require('sequelize');\nconst process = require('process');\nconst basename = path.basename(__filename);\nconst env = process.env.APP_NODE_ENV || 'development';\nconst config = require(__dirname + '/../../config/dbConfig.js')[env];\nconst db = {};*/\nimport fs from 'fs';\nimport path from 'path';\nimport { Sequelize } from 'sequelize';\nimport dbConfig from '../../config/dbConfig';\n\nconst basename = path.basename(__filename);\nconst env = process.env.APP_NODE_ENV || 'development';\nconst config = dbConfig[env];\nconst db = {};\n\n// Initialize Sequelize\nlet sequelize;\nif (config.use_env_variable) {\n  sequelize = new Sequelize(process.env[config.use_env_variable], config);\n} else {\n  sequelize = new Sequelize(config.database, config.username, config.password, config);\n}\n\n// Dynamically import models using import()\nfs\n  .readdirSync(__dirname)\n  .filter(file => {\n    return (\n      file.indexOf('.') !== 0 &&\n      file !== basename &&\n      file.slice(-3) === '.js' &&\n      file.indexOf('.test.js') === -1\n    );\n  })\n  .forEach(async (file) => {\n    const modelPath = path.join(__dirname, file);\n    const model = (await import(modelPath)).default(sequelize, Sequelize.DataTypes);\n    db[model.name] = model;\n  });\n\n// Set associations\nObject.keys(db).forEach(modelName => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\n\n// Export db using module.exports (not export default)\nmodule.exports = db;\n\n"],"mappings":"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","ignoreList":[]}